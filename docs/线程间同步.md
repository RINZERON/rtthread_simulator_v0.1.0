## 线程同步的概念

同步 ≠ 同时，同步是指多个线程按预定的**先后次序**进行运行，同时是指同一个时间多个线程一起运行。

假定某个共享内存块A，如果它的访问不具备排他性，则它会同时被`线程1`和`线程2`访问，那么就有可能导致数据一致性的问题。比如`线程1`按位写入数据0xff，而`线程2`读取数据。如果线程1才写入了部分数据（0xf0），`线程2`就读走了，那么读取的数据就是错的。这样会造成系统后续的一系列问题。所以线程对共享内存的访问必须是具有排他性的。`线程1`和`线程2`互斥访问共享内存A。显然，这又会涉及到一个访问次序问题。

那系统如何确定`线程1`和`线程2`的访问次序呢？即如何实现这个**同步**呢？RT-Thread 提供了多种方法：信号量（samaphore）、互斥量（mutex）和事件集（event）。

## 信号量

简单的例子：停车！

停车场管理员就相当于信号量，管理员手中空车位的个数就是信号量的值（非负数，动态变化）；停车位相当于公共资源（临界区），车辆相当于线程。车辆通过获得管理员的允许取得停车位，就类似于线程通过获得信号量访问公共资源。

### 信号量的工作机制

信号量是一种轻型的用于解决线程间同步问题的内核对象，线程可以获取或释放它，从而达到同步或者互斥的目的。

